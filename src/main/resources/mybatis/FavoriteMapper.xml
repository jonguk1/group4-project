<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lend.shareservice.domain.favorite.FavoriteMapper">

    <resultMap type="com.lend.shareservice.entity.Favorite" id="FavoriteMap">
        <id property="favorite_id" column="favorite_id" />
        <result property="user_id" column="user_id"/>
        <result property="board_id" column="board_id"/>
        <collection property="boards" javaType="java.util.ArrayList"
                    ofType="com.lend.shareservice.entity.Board">
            <result property="board_id" column="board_id"/>
            <result property="content" column="content"/>
            <result property="title" column="title"/>
            <result property="item_image1" column="item_image1"/>
            <result property="price" column="price"/>
            <result property="item_name" column="item_name"/>
            <result property="interestCnt" column="interestCnt"/>
            <result property="hits" column="hits"/>
            <result property="isAuction" column="isAuction"/>
            <result property="isLend" column="isLend"/>
        </collection>
    </resultMap>

    <select id="favorites" parameterType="map" resultMap="FavoriteMap">
        select
        user_id,writer,b.title,b.content,price,isAuction,isLend,
        interestCnt,hits,item_name,item_image1
        from favorite f inner join board b
        on f.board_id=b.board_id
        <where>
            f.user_id= #{userId}
        </where>
        order by favorite_id desc limit #{limit} offset #{offset}
    </select>

    <select id="getFavoriteTotalCount" resultType="_int">
        select count(*) from favorite
    </select>


</mapper>