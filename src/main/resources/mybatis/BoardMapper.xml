<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lend.shareservice.domain.board.BoardMapper">

    <!-- 글을 등록함 -->
    <insert id="insertBoard" parameterType="com.lend.shareservice.entity.Board" useGeneratedKeys="true" keyProperty="boardId">
        INSERT INTO Board (boardCategoryId, writer, title, content, regDate, price, deadline, isAuction, isLend, interestCnt, hits, lendDate, returnDate, itemName, itemImage1, itemImage2, itemImage3, itemCategoryId, latitude, longitude, isMegaphone)
        VALUES (#{boardCategoryId}, #{writer}, #{title}, #{content}, NOW(), #{price}, #{deadline}, #{isAuction}, #{isLend}, #{interestCnt}, #{hits}, #{lendDate}, #{returnDate}, #{itemName}, #{itemImage1}, #{itemImage2}, #{itemImage3}, #{itemCategoryId}, #{latitude}, #{longitude}, #{isMegaphone})
    </insert>

    <!-- 상품의 모든 카테고리 가져옴-->
    <select id="selectAllItemCategory" resultType="com.lend.shareservice.web.board.dto.ItemCategoryDTO">
        SELECT * FROM Item_Category;
    </select>

    <!-- 상품 카테고리와 보드 카테고리와 일치하는 글들을 가져옴-->
    <select id="selectAllPostsByCategorys" parameterType="com.lend.shareservice.web.board.dto.ItemAndBoardCategoryDTO" resultType="com.lend.shareservice.entity.Board">
        SELECT * FROM Board
        WHERE itemCategoryId = #{itemCategoryId}
        AND boardCategoryId = #{boardCategoryId}
    </select>


    <select id="selectPostById" parameterType="Integer" resultType="com.lend.shareservice.entity.Board">
        SELECT * FROM Board
        WHERE boardId = #{value}
    </select>

</mapper>